{"ast":null,"code":"var _jsxFileName = \"/home/teja/Desktop/6th sem/SWE/FinalProject/integration/frontend/src/components/student/Announcements.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Announcements = ({\n  id\n}) => {\n  _s();\n  const [announcements, setAnnouncements] = useState([]);\n\n  // Function to calculate time elapsed since creation\n  const calculateTimeElapsed = (createdAt, duration) => {\n    const createdDate = new Date(createdAt);\n    const currentDate = new Date();\n    const elapsedTime = currentDate - createdDate;\n    const remainingTime = duration * 24 * 60 * 60 * 1000 - elapsedTime;\n    const fraction = elapsedTime / (duration * 24 * 60 * 60 * 1000);\n    console.log(createdDate);\n    console.log(currentDate);\n    console.log(elapsedTime);\n    console.log(fraction);\n    return {\n      elapsedTime,\n      remainingTime,\n      fraction\n    };\n  };\n  useEffect(() => {\n    var id = localStorage.getItem(\"userId\");\n    const fetchAnnouncements = async () => {\n      try {\n        const response = await axios.get(`http://localhost:5000/announcements/${id}`);\n        setAnnouncements(response.data);\n      } catch (error) {\n        console.error('Error fetching announcements:', error);\n      }\n    };\n    fetchAnnouncements();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"mb-4 my-4\",\n      children: \"Announcements\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this), announcements.map((announcement, index) => {\n      const {\n        elapsedTime,\n        remainingTime,\n        fraction\n      } = calculateTimeElapsed(announcement.created_at, announcement.duration);\n      let badgeColor = 'primary';\n      if (fraction <= 1 / 5) {\n        badgeColor = 'success'; // New\n      } else if (fraction >= 4 / 5) {\n        badgeColor = 'danger'; // Alert\n      }\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `alert alert-${badgeColor}`,\n        role: \"alert\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex align-items-center\",\n          children: [announcement.id.startsWith('hr.') && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"badge bg-secondary me-2\",\n            children: \"From HR\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 17\n          }, this), announcement.id.startsWith('office.') && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"badge bg-dark me-2\",\n            children: \"From HO\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 55,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"alert-heading\",\n            children: announcement.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 15\n          }, this), fraction <= 1 / 5 && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"badge bg-success ms-auto\",\n            children: \"New\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 59,\n            columnNumber: 17\n          }, this), fraction >= 4 / 5 && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"badge bg-danger ms-auto\",\n            children: \"Ending Soon\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: announcement.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 11\n      }, this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 5\n  }, this);\n};\n_s(Announcements, \"MLdoeMpvfE/h4MWtwJbdCM8JQSU=\");\n_c = Announcements;\nexport default Announcements;\nvar _c;\n$RefreshReg$(_c, \"Announcements\");","map":{"version":3,"names":["React","useState","useEffect","axios","jsxDEV","_jsxDEV","Announcements","id","_s","announcements","setAnnouncements","calculateTimeElapsed","createdAt","duration","createdDate","Date","currentDate","elapsedTime","remainingTime","fraction","console","log","localStorage","getItem","fetchAnnouncements","response","get","data","error","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","announcement","index","created_at","badgeColor","role","startsWith","title","content","_c","$RefreshReg$"],"sources":["/home/teja/Desktop/6th sem/SWE/FinalProject/integration/frontend/src/components/student/Announcements.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\nconst Announcements = ({ id }) => {\n  const [announcements, setAnnouncements] = useState([]);\n\n  // Function to calculate time elapsed since creation\n  const calculateTimeElapsed = (createdAt, duration) => {\n    const createdDate = new Date(createdAt);\n    const currentDate = new Date();\n    const elapsedTime = currentDate - createdDate;\n    const remainingTime = duration * 24 * 60 * 60 * 1000 - elapsedTime;\n    const fraction = elapsedTime / (duration * 24 * 60 * 60 * 1000);\n    console.log(createdDate);\n    console.log(currentDate);\n    console.log(elapsedTime);\n    console.log(fraction);\n    return { elapsedTime, remainingTime, fraction };\n  };\n\n  useEffect(() => {\n    var id=localStorage.getItem(\"userId\");\n    const fetchAnnouncements = async () => {\n      try {\n        const response = await axios.get(`http://localhost:5000/announcements/${id}`);\n        setAnnouncements(response.data);\n      } catch (error) {\n        console.error('Error fetching announcements:', error);\n      }\n    };\n\n    fetchAnnouncements();\n  }, []);\n\n  return (\n    <div className='container'>\n      <h1 className=\"mb-4 my-4\">Announcements</h1>\n      {announcements.map((announcement, index) => {\n        const { elapsedTime, remainingTime, fraction } = calculateTimeElapsed(announcement.created_at, announcement.duration);\n\n        let badgeColor = 'primary';\n        if (fraction <= 1 / 5) {\n          badgeColor = 'success'; // New\n        } else if (fraction >= 4 / 5) {\n          badgeColor = 'danger'; // Alert\n        }\n\n        return (\n          <div key={index} className={`alert alert-${badgeColor}`} role=\"alert\">\n            <div className=\"d-flex align-items-center\">\n              {announcement.id.startsWith('hr.') && (\n                <span className=\"badge bg-secondary me-2\">From HR</span>\n              )}\n              {announcement.id.startsWith('office.') && (\n                <span className=\"badge bg-dark me-2\">From HO</span>\n              )}\n              <h5 className=\"alert-heading\">{announcement.title}</h5>\n              {fraction <= 1 / 5 && (\n                <span className=\"badge bg-success ms-auto\">New</span>\n              )}\n              {fraction >= 4 / 5 && (\n                <span className=\"badge bg-danger ms-auto\">Ending Soon</span>\n              )}\n            </div>\n            <p>{announcement.content}</p>\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default Announcements;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}